<!doctype html>
<html lang="sr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aritmetička Kriptografija — Caesar (demo)</title>

  <style>
    :root{
      --bg:#0b0f14;
      --panel:#0f1620;
      --muted:#9aa6b2;
      --accent:#3bb6e4;
      --accent-2:#9b7bff;
      --card:#0e1620;
      --glass: rgba(255,255,255,0.03);
      --text:#e6eef6;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
    }

    /* Reset-ish */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(59,182,228,0.035), transparent 10%),
                  radial-gradient(800px 400px at 90% 90%, rgba(155,123,255,0.03), transparent 10%),
                  var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:28px;
    }

    .container{
      max-width:1100px;
      margin:0 auto;
      display:grid;
      grid-template-columns: 1fr;
      gap:28px;
    }

    header{ text-align:center; margin-bottom:6px }
    h1{
      font-size:32px;
      margin:6px 0 4px;
      line-height:1.05;
      letter-spacing:-0.02em;
    }
    h1 .gradient{
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    p.lead{ color:var(--muted); margin:0 0 16px; font-size:15px }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.04);
      padding:18px;
      border-radius:12px;
      box-shadow: 0 6px 30px rgba(2,6,12,0.6);
    }

    .grid-2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:18px;
    }

    label{ display:block; font-weight:600; font-size:13px; margin-bottom:8px }
    input[type="text"], input[type="number"], textarea{
      width:100%;
      padding:10px 12px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.04);
      background:var(--panel);
      color:var(--text);
      font-family: var(--mono);
      font-size:16px;
      outline:none;
    }
    input[type="range"]{ width:100% }

    .controls{ display:flex; gap:10px; margin-top:12px; flex-wrap:wrap }
    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 14px;
      border-radius:10px;
      border: none;
      cursor:pointer;
      font-weight:700;
      letter-spacing:0.01em;
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#061016;
      box-shadow: 0 8px 30px rgba(59,182,228,0.12);
    }
    .btn.secondary{
      background:transparent;
      color:var(--text);
      border:1px solid rgba(255,255,255,0.04);
      box-shadow:none;
      font-weight:600;
    }

    .output{
      min-height:64px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:14px;
      font-family:var(--mono);
      font-size:20px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.03);
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
    }

    .muted { color:var(--muted); font-size:13px }
    .small { font-size:13px }
    footer{ text-align:center; color:var(--muted); font-size:13px; margin-top:8px }

    /* Responsive */
    @media (max-width:900px){
      .grid-2{ grid-template-columns: 1fr; }
    }

  </style>
</head>
<body>

  <div class="container">
    <header>
      <div class="card" style="padding:20px 28px;">
        <div style="display:flex;gap:12px;align-items:center;justify-content:center;">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden focusable="false"><path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"></path><rect x="3" y="11" width="18" height="11" rx="2" stroke="currentColor" stroke-width="1.4"></rect></svg>
          <div style="text-align:left">
            <div style="font-weight:800; font-size:18px">CryptoLearn</div>
            <div style="color:var(--muted); font-size:13px">Aritmetička kriptografija — Caesar šifra (interaktivno)</div>
          </div>
        </div>

        <h1> <span class="gradient">Aritmetička Kriptografija</span><br><span style="font-weight:600">Interaktivno objašnjenje</span></h1>
        <p class="lead">Probajte Caesar šifru uživo — unesite poruku, izaberite ključ (pomeraj) i šifrujte ili dešifrujte poruku.</p>
      </div>
    </header>

    <main class="card" aria-labelledby="demo-title">
      <h2 id="demo-title" style="margin-top:0">Demonstracija</h2>

      <div class="grid-2">
        <section>
          <label for="message">Poruka za (de)šifrovanje</label>
          <input id="message" type="text" placeholder="Unesite poruku (npr. HELLO WORLD)" value="HELLO WORLD" aria-label="Poruka za sifrovanje">

          <div style="display:flex;gap:12px;margin-top:12px;align-items:center">
            <div style="flex:1">
              <label for="keyRange">Ključ (pomeraj): <span id="keyLabel" style="font-weight:800">3</span></label>
              <input id="keyRange" type="range" min="1" max="25" value="3" />
            </div>

            <div style="width:92px">
              <label for="keyNum" class="small">Broj</label>
              <input id="keyNum" type="number" min="1" max="25" value="3" />
            </div>
          </div>

          <div class="controls">
            <button id="btnEncrypt" class="btn" aria-label="Sifruj">Šifruj</button>
            <button id="btnDecrypt" class="btn secondary" aria-label="Desifruj">Dešifruj</button>
            <button id="btnClear" class="btn secondary" aria-label="Ocisti">Obriši</button>
          </div>

          <div style="margin-top:12px" class="muted">
            <div><strong>Napomena:</strong> Ova demonstracija radi sa slovima A–Z i zadržava razmake i znakove koji nisu slova. Mala i velika slova se čuvaju (case-sensitive).</div>
          </div>
        </section>

        <section>
          <label>Rezultat</label>
          <div id="output" class="output" aria-live="polite">---</div>

          <div style="margin-top:14px">
            <label>Vizuelizacija pomeraja (A–Z)</label>
            <div class="card" style="margin-top:8px; padding:12px; background:var(--glass); border-radius:8px">
              <div class="small muted" style="margin-bottom:8px">Original ABC...Z</div>
              <div id="alphabetOriginal" class="small" style="font-family:var(--mono); display:flex; gap:6px; flex-wrap:wrap">A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</div>
              <div class="small muted" style="margin-top:10px">Pomereno za <span id="visKey">3</span> →</div>
              <div id="alphabetShifted" class="small" style="margin-top:6px; font-family:var(--mono); display:flex; gap:6px; flex-wrap:wrap; font-weight:700">D E F G H I J K L M N O P Q R S T U V W X Y Z A B C</div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer>
      © 2025 — Interaktivna demo stranica za učenje kriptografije
    </footer>
  </div>

  <script>
    // Utility: Caesar cipher that preserves case and non-letter characters
    function caesarShift(text, shift) {
      // normalize shift to 0..25
      shift = ((shift % 26) + 26) % 26;
      const A = 'A'.charCodeAt(0);
      const Z = 'Z'.charCodeAt(0);
      const a = 'a'.charCodeAt(0);
      const z = 'z'.charCodeAt(0);

      let out = '';
      for (let ch of text) {
        const code = ch.charCodeAt(0);
        if (code >= A && code <= Z) {
          out += String.fromCharCode(A + (code - A + shift) % 26);
        } else if (code >= a && code <= z) {
          out += String.fromCharCode(a + (code - a + shift) % 26);
        } else {
          out += ch;
        }
      }
      return out;
    }

    // Elements
    const messageEl = document.getElementById('message');
    const keyRange = document.getElementById('keyRange');
    const keyNum = document.getElementById('keyNum');
    const keyLabel = document.getElementById('keyLabel');
    const btnEncrypt = document.getElementById('btnEncrypt');
    const btnDecrypt = document.getElementById('btnDecrypt');
    const btnClear = document.getElementById('btnClear');
    const outputEl = document.getElementById('output');
    const alphabetOriginal = document.getElementById('alphabetOriginal');
    const alphabetShifted = document.getElementById('alphabetShifted');
    const visKey = document.getElementById('visKey');

    function updateKeyUI(val){
      keyRange.value = val;
      keyNum.value = val;
      keyLabel.textContent = String(val);
      visKey.textContent = String(val);
      // update shifted alphabet
      const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
      const shifted = letters.map((_,i) => letters[(i + Number(val)) % 26]);
      alphabetShifted.textContent = shifted.join(' ');
    }

    keyRange.addEventListener('input', (e) => {
      updateKeyUI(e.target.value);
    });

    keyNum.addEventListener('input', (e) => {
      let v = Number(e.target.value);
      if (Number.isNaN(v)) v = 1;
      if (v < 1) v = 1;
      if (v > 25) v = 25;
      updateKeyUI(v);
    });

    btnEncrypt.addEventListener('click', () => {
      const txt = messageEl.value || '';
      const k = parseInt(keyRange.value,10) || 0;
      const out = caesarShift(txt, k);
      outputEl.textContent = out;
    });

    btnDecrypt.addEventListener('click', () => {
      const txt = messageEl.value || '';
      const k = parseInt(keyRange.value,10) || 0;
      const out = caesarShift(txt, -k);
      outputEl.textContent = out;
    });

    btnClear.addEventListener('click', () => {
      messageEl.value = '';
      outputEl.textContent = '---';
    });

    // initialize UI
    updateKeyUI(Number(keyRange.value));
  </script>
</body>
</html>
